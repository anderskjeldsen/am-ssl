namespace SslTest {
    class Program {
        import Am.Lang
        import Am.IO
        import Am.Net
        import Am.IO.Networking

        static fun main() {
            "connect to github".println()
            var s = Socket.create(AddressFamily.inet, SocketType.stream, ProtocolFamily.unspecified)
            s.connect("github.com", 443)
            "connected".println()

            var sslStream = new SslSocketStream(s, "github.com")
            "ssl stream created".println()

            var ts = new TextStream(sslStream)
            ts.writeString("GET / HTTP/1.1\r\nHost:github.com\r\n\r\n")

            var rs = ts.readString()
            rs.println()        
            s.close()    
        }
    }
}